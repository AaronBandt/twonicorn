<div metal:use-macro="layout">
    <div metal:fill-slot="content">

      <script src="/static/jquery-2.1.3.min.js"></script>
      <script src="/static/row_expansion_group.js"></script>

      <div tal:condition="not commit and mode == 'add'">
        <p>

          <form class="cp_form_group" action="/cp/group?mode=add&commit=true" method="POST">
            <input type="hidden" name="form.submitted"/>
            <ul>
              <li>
                <h2>${subtitle}</h2>
                <span class="required_notification">* Denotes Required Field</span>
              </li>
            <ul>
              <li>
                <h3>Group List</h3>
              </li>
              <li>

                <table id="tab_group">
                  <tbody>
                    <tr id='addr0'>
                      <td>
                        <span for="group_name">Group Name:</span><br>
                        <input type="text" id="group_name" name="group_name" required/>
                        <span class="form_hint">The full AD name of the group</span>
                      </td>
                      <td>
                        <span for="group_perms0">Promote:</span><br>
                        <input type="checkbox" name="group_perms0" value="promote">
                      </td>
                      <td>
                        <span for="group_perms0">Admin:</span><br>
                        <input type="checkbox" name="group_perms0" value="admin">
                      </td>
                      <td>
                        <span for="group_perms0">Control Panel:</span><br>
                        <input type="checkbox" name="group_perms0" value="cp">
                      </td>
                    </tr>
                    <tr id='addr1'></tr>
                  </tbody>
                </table>

              </li>
            </ul>
            <ul>
              <li class="exp">
                <input id="add_row" class="button exp" type="button" value="Add A Group"/>
                <input id="delete_row" class="button exp disable" type="button" value="Remove Last Row"/>
              </li>
              <li>
                <input class="button" type="submit" name="submit" value="submit"/>
              </li>
            </ul>
          </form>

        </p>
      </div>


      <div tal:condition="not commit and mode == 'edit'">
        <p>

          <form class="cp_form_group" action="/cp/group?mode=edit&commit=true" method="POST">
            <input type="hidden" name="form.submitted"/>
            <ul>
              <li>
                <h2>${subtitle}</h2>
                <span class="required_notification">* Denotes Required Field</span>
              </li>
            <ul>
              <li>
                <h3>Group List</h3>
                <span class="required_notification">Clicking submit updates all groups</span>
              </li>
              <li>

                <table>
                  <tbody>
                    <tr tal:repeat="item group_perms['all_groups']">
                      <td>
                        <span for="group_name">Group Name:</span><br>
                        <input tal:attributes="value item" type="text" id="group_name" name="group_name" required/>
                        <span class="form_hint">The full AD name of the group</span>
                      </td>
                      <td>
                        <span for="group_perms">Promote:</span><br>
                        <input tal:attributes="checked True if (item in group_perms['prod_groups']) else False" type="checkbox" name="prod" value="prod">
                      </td>
                      <td>
                        <span for="group_perms">Admin:</span><br>
                        <input tal:attributes="checked True if (item in group_perms['admin_groups']) else False" type="checkbox" name="admin" value="admin">
                      </td>
                      <td>
                        <span for="group_perms">Control Panel:</span><br>
                        <input tal:attributes="checked True if (item in group_perms['cp_groups']) else False" type="checkbox" name="cp" value="cp">
                      </td>
                    </tr>
                  </tbody>
                </table>

              </li>
            </ul>
            <ul>
              <li>
                <input class="button" type="submit" name="submit" value="submit"/>
              </li>
            </ul>
          </form>

        </p>
      </div>


  </div>
</div>

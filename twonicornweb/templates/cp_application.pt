<div metal:use-macro="layout">
    <div metal:fill-slot="content">

      <div tal:condition="not commit">
        <script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="/static/row_expansion.js"></script>


        <p>
          <form class="cp_form" action="/cp/application?mode=add&commit=true" method="POST">
            <input type="hidden" name="form.submitted"/>
            <ul>
              <li>
                <h2>${subtitle}</h2>
                <span class="required_notification">* Denotes Required Field</span>
              </li>
              <li>
                <h3>Application</h3>
              </li>
              <li>
                <label for="application_name">Name:</label>
                <input type="text" id="application_name" name="application_name" placeholder="Profile API" required />
                <span class="form_hint">Friendly name</span>
              </li>
              <li>
                <label for="nodegroup">Node Group:</label>
                <input type="text" id="nodegroup" name="nodegroup" placeholder="paw" required/>
                <span class="form_hint">Name of the nodegroup this application lives on</span>
              </li>
            </ul>
            <ul id="ul_deploy">
              <li>
                <h3>Deploy</h3>
                <span class="required_notification">An application requires at least one deploy</span>
              </li>
              <li>

                <table id="tab_deploy">
                  <tbody>
                    <tr id='addr0'>
                      <td>
                      1
                      </td>
                      <td>
                        <span for="artifact_type0">Artifact Type:</span><br>
                          <select id="artifact_type0" name="artifact_type" placeholder="Select Something" required>
                            <option value="" disabled="disabled" selected="selected">Please select an artifact Type</option>
                            <option tal:repeat="item artifact_types" tal:content="item.name"></option>
                          </select>
                        <span class="form_hint">Artifact type</span>
                      </td>
                      <td>
                        <span for="deploy_path0">Deploy Path:</span><br>
                        <input type="text" id="deploy_path0" name="deploy_path" placeholder="/app/tomcat/conf" required/>
                        <span class="form_hint">Where this deploy gets installed</span>
                      </td>
                      <td>
                        <span for="package_name0">Package Name:</span><br>
                        <input type="text" id="package_name0" name="package_name" placeholder="MyPythonPackage"/>
                        <span class="form_hint">Required for deploys that are deployed using a native package management tool (python (pip), rpm (yum), etc.)</span>
                      </td>
                    </tr>
                    <tr id='addr1'></tr>
                  </tbody>
                </table>

              </li>
            </ul>
            <ul>
              <li>
                <input id="add_row" class="button exp" type="button" value="+"/>
                <input id="delete_row" class="button exp" type="button" value="-"/>
              </li>
              <li>
                <input class="button" type="submit" name="submit" value="submit"/>
              </li>
            </ul>
          </form>

        </p>
      </div>

      <p tal:condition="commit and not error_msg">
        Successfully created new Application: ${application_id}
      </p>

      <p tal:condition="error_msg">
        <h2>ERROR</h2>
        Error creating new Application: ${error_msg}
      </p>

  </div>
</div>
